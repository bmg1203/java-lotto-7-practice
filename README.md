# java-lotto-precourse

## 미션 소개

이 프로젝트는 우아한테크코스 프리코스 3주차 미션으로, 로또 발매기를 구현한다.

## 미션 목표

### 기본 요구사항

- indent의 depth를 3이 넘지 않도록 구현한다.
- 메서드가 한 가지 일만 하도록 최대한 작게 만든다.
- 3항 연산자를 쓰지 않는다.
- 메서드의 길이가 15 라인을 넘어가지 않도록 구현한다.
- else 예약어를 쓰지 않는다.
- Enum을 적용하여 구현한다.

### 개인적 목표에 따른 요구사항

- 객체 지향 프로그래밍 원칙을 적용한 로또 발매기를 구현한다.
- 기능별 커밋을 원칙으로 한다.
- TDD를 적용한다.
    - 각 기능별로 테스트 케이스를 작성한다.
    - 기능별로 해피 케이스, 예외 케이스를 나누어 작성한다.
    - 실패 테스트 작성 -> 테스트 통과 -> 리팩토링
- 클린 코드를 지향하며 의미 있는 변수명과 메서드명을 사용한다.

## 주요 클래스 설명

### 도메인 객체

- `Application`: 프로그램의 진입점이며 LottoManager를 초기화하고 실행을 위임한다.
- `LottoManager`: 로또 발매 진행 로직을 총괄 관리한다.
- `Amount`: 구매 금액을 관리하고 검증하는 불변 객체이다.
- `Lotto`: 로또 번호 6개를 관리하고 검증하는 불변 객체이다.
- `PurchasedLottos`: 구매한 로또들의 일급 컬렉션으로 당첨 확인 기능을 제공한다.
- `MainWinningNumbers`: 당첨 번호 6개를 관리하고 검증하는 불변 객체이다.
- `BonusNumber`: 보너스 번호를 관리하고 검증하는 불변 객체이다.
- `WinningNumbers`: 당첨 번호와 보너스 번호를 통합 관리하는 불변 객체이다.
- `LottoResult`: 당첨 결과와 수익률을 관리하는 객체이다.
- `Rank`: 당첨 등수와 상금을 관리하는 Enum

### 유틸리티

- `IoHandler`: 입출력 작업을 총괄하는 싱글톤 객체
- `InputHandler`: Console 입력을 담당하는 싱글톤 객체
- `OutputHandler`: 결과 출력을 담당하는 싱글톤 객체
- `RandomNumberGenerator`: 로또 번호 생성을 담당하는 싱글톤 객체
- `ValidatingParser`: 입력값 파싱과 검증을 담당하는 싱글톤 객체
- `InputValidationMessage`: 입력값 검증 관련 에러 메시지 Enum
- `LottoValidationMessage`: 로또 번호 검증 관련 에러 메시지 Enum
- `WinningNumbersValidationMessage`: 당첨 번호 검증 관련 에러 메시지 Enum

## 기능 목록

### 입력 기능 (InputHandler)

- [x] 사용자가 적절한 값을 입력할때까지 Console.readLine()을 사용해 구입 금액을 입력받는다.
- [x] 사용자가 적절한 값을 입력할때까지 Console.readLine()을 사용해 당첨 번호를 입력받는다.
- [x] 사용자가 적절한 값을 입력할때까지 Console.readLine()을 사용해 보너스 번호를 입력받는다.

### 입력 검증 및 변환 기능 (ValidatingParser)

- [x] 구입 금액이 숫자인지 검증한다.
- [x] 구입 금액이 양의 정수인지 검증한다.
- [x] 구입 금액이 1000으로 나누어 떨어지는지 검증한다.
- [x] 쉼표(,)로 구분된 문자열을 당첨 번호 목록으로 분리한다.
- [x] 각 당첨 번호가 숫자인지 검증한다.
- [x] 각 당첨 번호가 빈 문자열인지 검증한다.
- [x] 각 당첨 번호가 1~45 범위인지 검증한다.
- [x] 보너스 번호가 숫자인지 검증한다.
- [x] 보너스 번호가 양의 정수인지 검증한다.

### 로또 기능 (Lotto)

- [x] 숫자 리스트로 Lotto 객체를 생성한다.
- [x] Lotto 생성시 숫자 리스트의 사이즈가 6개인지 검증한다.
- [x] Lotto 생성시 각 숫자가 중복되지 않는지 검증한다.
- [x] Lotto 생성시 각 숫자가 1~45 범위인지 검증한다.
- [x] 당첨 번호와 일치하는 개수를 반환한다.
- [x] 보너스 번호와 일치하는지 여부를 반환한다.

### 구매 로또 관리 기능 (PurchasedLottos)

- [x] 로또 목록으로 PurchasedLottos를 생성한다.
- [x] 당첨 번호와 보너스 번호를 비교하여 당첨된 등수 목록을 반환한다.
- [x] 로또의 총 수량을 반환한다.
- [x] 구매한 로또 목록을 반환한다.

### 당첨 결과 관리 기능 (LottoResult)

- [x] 구매 금액, 구매 로또, 당첨 번호를 받아 결과를 생성한다.
- [x] 당첨 등수별 당첨 횟수를 반환한다.
- [x] 수익률을 계산하여 반환한다.(소수점 둘째자리에서 반올림)

### 로또 발매 기능 (LottoManager)

- [x] 구입 금액을 받아 금액에 맞는 수의 로또를 생성한다.
- [x] 당첨 번호를 받아 당첨 통계를 생성한다.
- [x] IoHandler를 통해 입출력을 처리한다.

### 랜덤값 생성 기능 (RandomNumberGenerator)

- [x] Randoms.pickUniqueNumbersInRange()를 사용해 1-45 사이의 중복되지 않은 정수 6개를 생성한다.
- [x] 생성된 번호를 오름차순으로 정렬하여 반환한다.

## 테스트 목록

### Amount 테스트

- [x] Amount 생성에 성공한다.
- [x] 금액이 1000으로 나누어 떨어지지 않으면 예외가 발생한다.

### Lotto 테스트

- [x] 숫자 리스트로 Lotto 생성에 성공한다.
- [x] 숫자 리스트의 크기가 6이 아니면 예외가 발생한다.
- [x] 숫자가 중복되면 예외가 발생한다.
- [x] 숫자가 1-45 범위를 벗어나면 예외가 발생한다.
- [x] 당첨 번호와 일치하는 개수를 정확히 계산한다.
- [x] 보너스 번호 일치 여부를 정확히 판단한다.

### PurchasedLottos 테스트

- [x] 로또 목록으로 생성에 성공한다.
- [x] 당첨 번호와 비교하여 당첨된 등수 목록을 정확히 반환한다.

### LottoResult 테스트

- [x] 구매 정보와 당첨 번호로 결과 생성에 성공한다.
- [x] 등수별 당첨 횟수를 정확히 계산한다.
- [x] 수익률을 정확히 계산한다.

### Rank 테스트

- [x] 일치하는 번호 수와 보너스 번호 일치 여부에 따라 정확한 등수를 반환한다.
- [x] 당첨 기준에 해당하지 않으면 Optional.empty()를 반환한다.

### ValidatingParser 테스트

- [x] 구매 금액 입력값을 정확히 검증한다.
- [x] 당첨 번호 입력값을 정확히 검증한다.
- [x] 보너스 번호 입력값을 정확히 검증한다.

## 작성자

lvalentine6 (이승로)