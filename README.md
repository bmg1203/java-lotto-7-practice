# 2024 UTC Precourse 3주차 ___ java-lotto
## 0️⃣ _ 3주차 구현 목표
``` 
    
    📌 주어진 것에 몰두하자

        먼저 주어진 명세를 기반으로 구현할 것들을 먼저 꼼꼼하게 정리한다.
        이후 매일 구현할 내용을 지정하고, 그것에 집중한다.
        구현이 끝나면 commit에 최대한 자세하게 작성한다.


    📌 테스트 케이스는 더욱 다양한 케이스에서 많이 검증한다.

        작은 단위의 테스트(함수, 기능별 테스트)를 진행한다.
        부정적인 경우뿐만 아니라 긍정적인 부분도 테스트를 진행한다.

    📌 2주차 공통 피드백 + 명세 내부 요구 사항 반영하기

        1. 함수나 변수의 이름에 자료형을 사용하지않는다.
        2. 값을 하드코딩하지 않고, 상수로 선언한 뒤에 사용한다.
        3. 먼저 전체적으로 구현해야할 기능의 리스트를 사전에 설정하고, 구현함에 따라 수정한다.
        4. 기능은 각각 최대한 작은 단위로 구현하고, 객체의 협동으로 프로그램이 작동하도록 구성한다.
        5. Enum을 사용하고, else를 사용하지 않는다.
        6. 함수의 길이가 15라인을 넘어가지 않도록 구현한다.
    
    📌 Discord 내부에서 여러 코드 리뷰들을 보고 적용해야하는점

        1. Getter에서 Collection을 반환하는 경우, 추후에 직접 수정이 불가능하도록 주기.
            - Collections.unmodifiableMap() 같은 기능 활용해보기
        2. 에러를 출력하는 것도 함수 내에 Sout를 사용하지 않고, OutputView를 활용하기
        3. 모든 기능은 최대한 작은 기능의 조합으로 만들고, 각각의 기능은 분리해서 구현하기
        4. 매직넘버 하드코딩은 절대 기피 -> Enum이나 상수 선언을 활용 / 여러 함수에 걸쳐져 나타나는 함수는 따로 상수만 분리해서 구현하기
        5. 특정 서비스, 기능들이 오직 어떤 DTO를 입력으로만 받는다면, 차라리 DTO와 Service를 분리하지 않고, Domain으로 합치는 게 나을수 있겠다.


```
## 1️⃣ _ 파일 디렉토리 구조
```
/src/main/java/lotto
    │
    ├── Application.java
    ├── controller/
    │   └── LottoController : 전체 실행 흐름을 관리
    ├── domain/
    │   ├── Lotto : 각각의 로또를 객체화하여 사용하기 위한 클래스 
    │   ├── LottoCollection : 생성된 로또, 구입 금액, 당첨 번호, 보너스 번호를 관리하는 클래스
    │   ├── LottoPrize : 로또의 당첨 금액을 관리하기 위한 Enum 클래스
    │   └── LottoResult : 로또의 당첨 결과를 관리하기 위한 클래스
    ├── Service/
    │   ├── LottoPrizeService : 로또 당첨 결과를 계산하는 로직을 구현한 클래스
    │   └── LottoService : 새로운 로또 생성을 위한 로직을 구현한 클래스
    ├── view/
    │   ├── InputView : 사용자로부터 입력을 담당하는 기능을 구현한 클래스
    │   ├── OutputView : 공백 출력, 예외 출력과 같은 공용 출력 기능을 구현한 클래스
    │   ├── OutputPrompt : 입력을 받는 경우 출력하는 Prompt과 관련된 기능을 구현한 클래스
    │   └── OutputResult : 프로그램의 결과를 출력하는 기능을 구현한 클래스
    └── util/
        ├── constant
        │   └── LottoConstants : 여러 클래스에서 범용적으로 사용되는 상수를 구현한 클래스
        └── validator
            ├── CommonValidator : 여러 Validator에서 공통적으로 사용하는 예외 처리 함수를 구현한 클래스
            ├── PurchaseMoneyValidator : 로또 구입 금액의 입력에 대한 예외 처리 함수를 구현한 클래스
            ├── LottoValidator : 로또 클래스 인스턴스 생성시에 예외 처리 함수를 구현한 클래스
            ├── WinnerNumberValidator : 로또 당첨 번호의 입력에 대한 예외 처리 함수를 구현한 클래스
            └── BonusNumberValidator : 로또 보너스 번호의 입력에 대한 예외 처리 함수를 구현한 클래스

    

```
## 2️⃣ _ 구현해야할 기능 리스트

### 0. Lotto 클래스, Enum 클래스

- Lotto 클래스

    - 제공된 Lotto 클래스를 사용하여 구현하여한다.

    - Lotto에 numbers 이외의 필드(인스턴스 변수)를 추가할 수 없다.

    - numbers의 접근 제어자인 private은 변경할 수 없다.

    - Lotto의 패키지를 변경할 수 있다.

        ```Java
            public class Lotto {
            private final List<Integer> numbers;

            public Lotto(List<Integer> numbers) {
                validate(numbers);
                this.numbers = numbers;
            }

            private void validate(List<Integer> numbers) {
                if (numbers.size() != 6) {
                    throw new IllegalArgumentException("[ERROR] 로또 번호는 6개여야 합니다.");
                }
            }

            // TODO: 추가 기능 구현
            }

        ```
- Enum 클래스

    - 프로그래밍 요구 사항 3

        - Java Enum을 적용해서 프로그램을 구현한다.

### 1. 로또 구입 금액 입력 및 유효성 검증
- 요약 : 사용자로부터 구입할 로또의 금액을 입력받고, 입력 받은 값의 유효성을 검증한다.

- 요구 조건 
    - 사용자가 입력하는 값은 camp.nextstep.edu.missionutils.Console의 readLine()을 활용한다.

    - 금액은 1,000원 단위로 나뉘어 떨어진다.

    - 금액이 0보다 큰 양의 정수이다.

    - 조건을 모두 만족하지 않는다면 IllegalArgumentException 발생

- 세부 작업
    1. 사용자로부터 로또 구입 금액을 입력 받는다.

        - camp.nextstep.edu.missionutils.Console의 readLine() 사용

    2. 입력받은 로또 구입 금액이 유효한지 검사한다.

        - 입력받은 로또 구입 금액이 숫자(Literal)인지 검증한다.

        - 입력받은 로또 구입 금액이 양수인지 검증한다.

        - 입력받은 로또 구입 금액이 1,000원 단위로 나뉘어 떨어지는 정수인지 검증한다.

        - 위 조건을 다 만족하지 못하는 경우 IllegalArgumentException을 발생시키고 프로그램 종료.

            - 에러 메시지 : "[ERROR] 로또 구입 금액은 1,000원 단위의 양의 정수이여야합니다."

    3. 입력값이 유효한 경우, 입력된 정수값을 반환

- 예상 결과
    ```
        A.  "2000"     -> Valid
        B.  "Money"    -> Invalid  -> IllegalArgunemtException
        C.  "-2000"    -> Invalid  -> IllegalArgunemtException
        D.  "1234"     -> Invalid  -> IllegalArgunemtException
    ```

---
### 2. 로또 구입 금액에 따라 새로운 로또 번호를 생성
- 요약 : 입력 받은 로또 구입 금액에 맞추어 새로운 로또 번호(들)를 생성한다.

- 요구 조건
    - Randoms.pickNumberInRane(0, 45) 함수를 사용한다.

    - 로또 번호는 1-45 사이의 중복되지 않은 숫자 6개이다.

    - 로또 번호는 오름차순으로 정렬하여 보여준다.

- 세부 작업
    1. 총 구입하여야하는 로또의 숫자 N을 계산

    2. N 회 만큼 아래의 내용을 반복

        - 1-45 사이의 중복되지 않은 정수 6개를 생성한다.
        
            - camp.nextstep.edu.missionutils.Randoms 라이브러리 사용
            
            - Randoms.pickUniqueNumbersInRange(1, 45, 6); 활용

        - 정해진 6개의 숫자를 오름 차순으로 정렬한다.

    3. N개의 생성된 로또를 출력한다.

        - 총 구매한 로또의 개수를 출력한다 

            - 형식 : "N개를 구매했습니다."

        - 각각의 로또는 한 줄씩 [1, 2, 3, 4, 5, 6]의 형태로 출력한다.

- 예상 결과

    ```
        2개를 구매했습니다.
        [8, 21, 23, 41, 42, 43] 
        [3, 5, 11, 16, 32, 38] 
    ```
    
---

### 3. 로또 당첨 번호 입력 및 유효성 검증
- 요약 : 사용자로부터 로또 당첨 번호를 입력 받고, 입력받은 값의 유효성을 검사한다.

- 요구 조건
    - 사용자가 입력하는 값은 camp.nextstep.edu.missionutils.Console의 readLine()을 활용한다.

    - 당첨 번호는 각각 0-45 사이의 정수이다.

    - 당첨 번호는 ","로 구분된 총 6개의 숫자이다.

- 세부 작업

    1. 사용자로부터 로또 당첨 보너스 번호를 입력 받는다.

        - camp.nextstep.edu.missionutils.Console의 readLine() 사용

    2. 입력받은 로또 당첨 번호가 유효한지 검사한다.

        - 당첨 번호가 ","로 구분된 총 6개의 숫자인지 검증한다.

        - 입력받은 숫자가 모두 1-45 사이의 숫자인지 검증한다.

        - 위 조건을 만족하지 못하는 경우 IllegalArgumentException을 발생시키고 프로그램 종료.

            - 에러 메시지 : "[ERROR] 로또 당첨 번호는 1부터 45 사이의 6개의 숫자여야 합니다."    

    3. 입력값이 유효한 경우, 입력된 정수 배열을 반환
- 예상 결과

    ```
       A.   1,2,3,4,5,6     -> Valid
       B.   1,2,3,4,5       -> Invalid      -> IllegalArgumentException
       c.   1,2,3,4,55,6    -> Invalid      -> IllegalArgumentException
    ```
---

### 4. 로또 당첨 보너스 번호 입력 및 유효성 검증
- 요약 : 사용자로부터 로또 당첨 보너스 번호를 입력 받고, 입력받은 값의 유효성을 검사한다.

- 요구 조건

    - 사용자가 입력하는 값은 camp.nextstep.edu.missionutils.Console의 readLine()을 활용한다.

    - 당첨 번호는 각각 0-45 사이의 정수이다.

- 세부 작업
    1. 사용자로부터 로또 당첨 번호를 입력 받는다.

        - camp.nextstep.edu.missionutils.Console의 readLine() 사용

    2. 입력받은 로또 당첨 번호가 유효한지 검사한다.

        - 6개의 숫자가 모두 1-45 사이의 숫자인지 검증한다.

        - 위 조건을 다 만족하지 못하는 경우 IllegalArgumentException을 발생시키고 프로그램 종료.

            - 에러 메시지 : "[ERROR] 로또 보너스 번호는 1부터 45 사이의 숫자여야 합니다."

    3. 입력값이 유효한 경우, 입력된 정수 배열을 반환

- 예상 결과

    ```
       A.   29          -> Valid
       B.   55          -> Invalid      -> IllegalArgumentException
       c.   a           -> Invalid      -> IllegalArgumentException
    ```
---

### 5. 최종 당첨 통계 출력
- 요약 : 사용자에게 입력받은 당첨 번호와 구매한 로또를 통해 최종 결과를 출력한다.

- 요구 조건

    - 수익률은 소수점 둘때 자리에서 반올림한다.

- 세부 작업

    1. 입력 받은 정보를 기반으로 당첨 정보를 수집한다.

        - 3개 일치 시 5,000원

        - 4개 일치 시 50,000원

        - 5개 일치 시 1,500,000원

        - 5개 일치 시 + 보너스 볼 일치 시 30,000,000원

        - 6개 일치 시 2,000,000,000원

    2. 당첨 정보와 구입 금액을 기반으로 수익률을 연산한다.

        - 수익률은 소수점 둘째 자리에서 반올림한다.

    3. 당첨 통계 내역을 출력한다.

        - 출력 형식은 다음과 같다.

            ```
                당첨 통계
                ---
                3개 일치 (5,000원) - N개
                4개 일치 (50,000원) - N개
                5개 일치 (1,500,000원) - N개
                5개 일치, 보너스 볼 일치 (30,000,000원) - N개
                6개 일치 (2,000,000,000원) - N개
                총 수익률은 NN.N%입니다.

            ```
- 예상 출력 결과
    ```
        당첨 통계
        ---
        3개 일치 (5,000원) - 1개
        4개 일치 (50,000원) - 0개
        5개 일치 (1,500,000원) - 0개
        5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
        6개 일치 (2,000,000,000원) - 0개
        총 수익률은 62.5%입니다.

    ```
 
## 3️⃣ 제출 전 요구 사항 만족 표 작성
### 기능 요구 사항
- [X] 로또 번호의 숫자 범위는 1~45까지이다.
- [X] 1개의 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
- [X] 당첨 번호 추첨 시 중복되지 않는 숫자 6개와 보너스 번호 1개를 뽑는다.
- [X] 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.
- [X] 1등: 6개 번호 일치 / 2,000,000,000원
- [X] 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
- [X] 3등: 5개 번호 일치 / 1,500,000원
- [X] 4등: 4개 번호 일치 / 50,000원
- [X] 5등: 3개 번호 일치 / 5,000원
- [X] 로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또를 발행해야 한다.
- [X] 로또 1장의 가격은 1,000원이다.
- [X] 당첨 번호와 보너스 번호를 입력받는다.
- [X] 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력하고 로또 게임을 종료한다.
- [X] 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException을 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.

### 입출력 요구 사항
- [x] 로또 구입 금액을 입력 받는다. 구입 금액은 1,000원 단위로 입력 받으며 1,000원으로 나누어 떨어지지 않는 경우 예외 처리한다.
- [x] 당첨 번호를 입력 받는다. 번호는 쉼표(,)를 기준으로 구분한다.
- [x] 보너스 번호를 입력 받는다.

- [x] 발행한 로또 수량 및 번호를 출력한다. 로또 번호는 오름차순으로 정렬하여 보여준다.
    ```
        8개를 구매했습니다.
        [8, 21, 23, 41, 42, 43] 
        [3, 5, 11, 16, 32, 38] 
        [7, 11, 16, 35, 36, 44] 
        [1, 8, 11, 31, 41, 42] 
        [13, 14, 16, 38, 42, 45] 
        [7, 11, 30, 40, 42, 43] 
        [2, 13, 22, 32, 38, 45] 
        [1, 3, 5, 14, 22, 45]

    ```
- [x] 당첨 내역을 출력한다.
    ```
        3개 일치 (5,000원) - 1개
        4개 일치 (50,000원) - 0개
        5개 일치 (1,500,000원) - 0개
        5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
        6개 일치 (2,000,000,000원) - 0개
    ```
- [x] 수익률은 소수점 둘째 자리에서 반올림한다. (ex. 100.0%, 51.5%, 1,000,000.0%)
    ```
        총 수익률은 62.5%입니다.
    ```
- [x] 예외 상황 시 에러 문구를 출력해야 한다. 단, 에러 문구는 "[ERROR]"로 시작해야 한다.
    ```
        [ERROR] 로또 번호는 1부터 45 사이의 숫자여야 합니다.
    ```

### 프로그래밍 요구사항
- [x] JDK 21 버전에서 실행 가능해야 한다.
- [x] 프로그램 실행의 시작점은 Application의 main()이다.
- [x] build.gradle 파일은 변경할 수 없으며, 제공된 라이브러리 이외의 외부 라이브러리는 사용하지 않는다.
- [x] 프로그램 종료 시 System.exit()를 호출하지 않는다.
- [x] 프로그래밍 요구 사항에서 달리 명시하지 않는 한 파일, 패키지 등의 이름을 바꾸거나 이동하지 않는다.
- [x] 자바 코드 컨벤션을 지키면서 프로그래밍한다.
- [x] 기본적으로 Java Style Guide를 원칙으로 한다.
---
- [x] indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다. 2까지만 허용한다.
- [x] 3항 연산자를 쓰지 않는다.
- [x] 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들어라.
- [x] JUnit 5와 AssertJ를 이용하여 정리한 기능 목록이 정상적으로 작동하는지 테스트 코드로 확인한다.
---
- [x] 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현한다.
- [x] else 예약어를 쓰지 않는다.
- [x] else를 쓰지 말라고 하니 switch/case로 구현하는 경우가 있는데 switch/case도 허용하지 않는다.
- [x] Java Enum을 적용하여 프로그램을 구현한다.
- [x] 구현한 기능에 대한 단위 테스트를 작성한다. 단, UI(System.out, System.in, Scanner) 로직은 제외한다.

### 라이브러리
- [x] camp.nextstep.edu.missionutils에서 제공하는 Randoms 및 Console API를 사용하여 구현해야 한다.
- [x] Random 값 추출은 camp.nextstep.edu.missionutils.Randoms의 pickUniqueNumbersInRange()를 활용한다.
- [x] 사용자가 입력하는 값은 camp.nextstep.edu.missionutils.Console의 readLine()을 활용한다.

### Lotto 클래스
- [x] 제공된 Lotto 클래스를 사용하여 구현해야 한다.
- [x] Lotto에 numbers 이외의 필드(인스턴스 변수)를 추가할 수 없다.
- [x] numbers의 접근 제어자인 private은 변경할 수 없다.
- [x] Lotto의 패키지를 변경할 수 있다.