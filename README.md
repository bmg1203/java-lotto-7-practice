# java-lotto-precourse

# 3주 차 미션 - 로또

## 구현할 기능 목록

### 1. 프로그램 시작 및 입출력

1.1 **구입 금액 입력**

- 구입 금액을 입력받는다.
- 예외 처리: 1,000원 단위로 입력되지 않을 경우 `IllegalArgumentException`을 발생시키고, `[ERROR] 구입 금액은 1,000원 단위로 입력해야 합니다.`를 출력한다.

1.2 **당첨 번호 입력**

- 쉼표(,)로 구분된 당첨 번호 6개를 입력받는다.
- 예외 처리:
    - 6개의 숫자가 입력되지 않은 경우
    - 1~45 범위 외 숫자가 입력된 경우
    - 중복된 숫자가 입력된 경우
    - 에러 발생 시 `[ERROR]`로 시작하는 메시지를 출력한다.

1.3 **보너스 번호 입력**

- 단일 보너스 번호를 입력받는다.
- 예외 처리:
    - 보너스 번호가 1~45 범위 밖이거나 당첨 번호에 중복된 경우 `IllegalArgumentException`을 발생시키고, `[ERROR] 보너스 번호는 당첨 번호와 중복될 수 없습니다.`를 출력한다.

### 2. 로또 발행

2.1 **로또 구입 및 로또 번호 생성**

- 구입 금액에 맞게 여러 장의 로또 번호를 담는 객체를 생성한다 (로또 1장 = 1,000원).
- 각 로또 번호는 중복되지 않은 6개의 숫자로 구성되며, 1~45 범위에서 난수로 생성된다.
- 생성된 로또 번호는 오름차순으로 정렬하여 출력한다.

2.2 **발행된 로또 번호 출력**

- 발행된 로또 수량과 로또 번호 목록을 출력한다.
    - 미션 출력 요구사항에 맞춰 출력한다.

### 3. 로또 당첨 여부 판단

3.1 **당첨 번호 및 보너스 번호 검증**

- 당첨 번호와 보너스 번호를 관리하며, 이들의 유효성을 검증하는 객체를 통해 검증한다.

3.2 **일치 개수 및 보너스 일치 여부 확인**

- 각 로또 번호와 당첨 번호를 비교하여 일치하는 숫자의 개수를 확인한다.
- 보너스 번호가 일치하는지 확인한다.

3.3 **당첨 결과 계산**

- 일치 개수와 보너스 번호 일치 여부에 따라 등수와 상금을 정의한 객체(enum 사용)를 사용하여 당첨 결과를 계산한다.
- 당첨 기준:
    - 1등: 6개 번호 일치
    - 2등: 5개 번호 일치 + 보너스 번호 일치
    - 3등: 5개 번호 일치
    - 4등: 4개 번호 일치
    - 5등: 3개 번호 일치

3.4 **당첨 결과 출력**

- 각 등수별 당첨 개수와 상금을 출력한다.
    - 미션 출력 요구사항에 맞춰 출력한다.

### 4. 수익률 계산 및 출력

4.1 **총 수익률 계산**

- 구입 금액 대비 총 당첨 금액으로 수익률을 계산한다.
- 수익률 = (당첨 금액 / 구입 금액) * 100으로 소수점 둘째 자리까지 반올림하여 출력한다.

4.2 **수익률 출력**

- 총 수익률을 `%` 형태로 출력한다.

### 5. 도메인 구조

- **Lotto**: 각 로또 번호 6개를 관리하는 클래스
- **LottoTicket**: 사용자가 구매한 여러 개의 `Lotto` 객체를 관리하는 클래스
- **WinningLotto**: 당첨 번호와 보너스 번호를 관리하는 클래스
- **LottoResult**: 당첨 결과 및 수익률을 관리하는 클래스
- **Rank (enum)**: 일치 개수와 보너스 번호에 따른 등수와 상금을 정의

### 6. 통합 테스트

6.1 **통합 테스트**

- 프로그램의 전체 흐름을 검증하는 통합 테스트 코드를 구현한다.
- 이 테스트는 프로그램의 시작부터 종료까지의 시나리오를 포함하여 입력 및 출력을 연속적으로 확인하며, 프로그램의 실제 동작을 시뮬레이션한다.

6.2 **입력과 출력의 흐름 테스트**

- **입력 검증 테스트**:
    - 구입 금액, 당첨 번호, 보너스 번호를 입력 받기 위한 메시지가 출력되는지 확인한다.
- **출력 검증 테스트**:
    - 구매한 로또 수량에 따른 각 로또 번호가 출력되는지 확인한다.
    - 당첨 결과가 요구사항에 맞게 출력되는지를 검증하며, 각 일치 개수 및 보너스 번호 일치 여부에 따른 등수와 상금이 올바르게 표시되는지를 테스트한다.

6.3 **수익률 계산 및 출력 검증**

- 사용자가 입력한 로또 번호와 당첨 번호를 비교하여 수익률이 올바르게 계산되는지를 확인한다.
- 수익률이 정확한 형식(소수점 둘째 자리까지 반올림)으로 출력되는지를 테스트한다.

6.4 **통합 테스트 구현 내용**

- 테스트는 입력 값이 주어질 때 예상되는 프로그램의 출력이 올바르게 발생하는지를 검증한다.
- `assertThat`을 사용하여 출력된 메시지가 예상된 메시지를 포함하는지 확인한다.
- 입력에 대한 요청 메시지가 출력되는지와 결과가 요구사항대로 형식에 맞게 표시되는지를 확인한다.

---

## 예외 처리

- 사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`을 발생시키고, `[ERROR]`로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
- 프로그램의 예상치 못한 상태에 대한 예외는 `IllegalStateException`을 발생시킨다.

---

## TDD 단위 테스트 목록

1. **로또 구입 금액 입력 테스트**
    - 구입 금액이 1000원 단위인지 확인하는 테스트
    - 구입 금액이 양의 정수인지 확인하는 테스트
    - 유효한 금액 입력 시 로또 장수를 계산하여 반환하는 테스트
    - 잘못된 금액 입력 시 예외 발생 여부 확인 테스트
2. **로또 번호 생성 및 유효성 테스트**
    - 랜덤으로 생성된 로또 번호 개수가 정확히 6개인지 확인하는 테스트
    - 생성된 각 번호가 1~45 범위 내에 있는지 확인하는 테스트
    - 생성된 로또 번호들 사이에 중복이 없는지 확인하는 테스트
    - 로또 번호가 오름차순으로 정렬되는지 확인하는 테스트
3. **로또 티켓 생성 및 관리 테스트**
    - 여러 로또 번호 객체가 올바르게 로또 티켓에 저장되는지 확인하는 테스트
    - 로또 티켓 내 로또 번호가 올바르게 관리 및 출력되는지 테스트
4. **당첨 번호 및 보너스 번호 유효성 테스트**
    - 당첨 번호 입력 시 6개의 숫자만 있는지 확인하는 테스트
    - 당첨 번호의 각 숫자가 1~45 범위에 속하는지 확인하는 테스트
    - 당첨 번호들 사이에 중복이 없는지 확인하는 테스트
    - 보너스 번호가 1~45 범위 내에 있는지 확인하는 테스트
    - 보너스 번호가 당첨 번호와 중복되지 않는지 확인하는 테스트
5. **일치 개수 및 보너스 번호 일치 여부 판단 테스트**
    - 로또 번호와 당첨 번호 객체 간의 일치 개수를 올바르게 계산하는 테스트
    - 보너스 번호가 일치하는지 여부를 확인하는 테스트
    - 3개 일치, 4개 일치, 5개 일치, 5개+보너스 일치, 6개 일치의 케이스별 판정 테스트
6. **Rank 등수 계산 및 검증 테스트**
    - `Rank` enum을 사용하여 일치 개수와 보너스 여부에 따른 등수 계산 테스트
    - 각 `Rank`의 상금이 올바르게 매핑되는지 확인하는 테스트
7. **당첨 결과 검증 및 출력 테스트**
    - 각 일치 개수별로 당첨 금액이 올바르게 계산되는지 테스트
    - 당첨 결과의 출력 형식이 요구사항에 맞게 나오는지 검증하는 테스트
8. **수익률 계산 테스트**
    - 구입 금액 대비 수익률이 올바르게 계산되는지 확인하는 테스트
    - 수익률이 소수점 둘째 자리에서 반올림되어 출력되는지 검증하는 테스트