# java-lotto-precourse

![Static Badge](https://img.shields.io/badge/precourse-week3-green)
![Static Badge](https://img.shields.io/badge/test_passed-2%2F2-blue)

---

### 미션 소개 및 다짐

우아한테크코스의 3주차 프리코스 미션으로 `로또`를 구현합니다! 3주차의 학습 목표는 관련 메서드를 묶어 
클래스를 만들고 객체들이 협력하여 하나의 큰 기능을 수행하도록 하는 것입니다. 또한 클래스와 함수에
대해 단위테스트를 수행하여 의도대로 동작하게 하는 것입니다. 객체의 협력, 올바른 단위 테스트가 
이번주차의 목표인만큼 더욱이 메서드의 단일 책임이 중요해진 것 같습니다.

코드 리뷰를 통해 enum으로 상수나 데이터를 묶는 것, 확장성을 조금 더 고려할 것, 더 면밀한 예외처리가
부족하다는 것으르 알았습니다. 이번주차에서는 이들을 보완하려 합니다. 추가적으로 비즈니스 로직과 도메인은 대체 무엇인지
학습할 것입니다.

3주차의 다짐과 목표는 일급 컬렉션과 wrapper 객체에 대해 알아보려 합니다. 또한 원시타입과 참조타입이 어떤 것이고 
장단점에 맞게 올바르게 사용할 예정입니다. 개인적으로 2주차 테스트가 조금 부족하다고 생각합니다. 개발 초기엔 많은 테스트가
있었지만 리팩터링하면서 겹치는 부분이나 테스트를 하지 못하는 메서드가 생겨 삭제하였습니다. 이번엔 테스트를 없애는 경우가 
잦지 않도록 노력해보려 합니다. 공동 학습 목표에서 `객체의 협력을 통해 큰 기능을 수행하는 것`을 통해 테스트는 어디까지
수행되어야 하는지에 대해서도 생각해보려합니다. (ex. Controller도 테스트를 해야할까요?)


# 로또

이건 로또와 관련된 여러 기능을 가지고 있는 시스템입니다.

첫번째는 `로또 단말기(판매점)`입니다. 일반적으로 우리는 로또는 판매점에서 단말기를 통해 구입하며 
요즘엔 번호를 자동으로 생성해주는 기능이 있어 주로 이를 활용합니다.
그리고 토요일 저녁 8시에 주최측에서 랜덤으로 로또 번호를 뽑아주고 우리는 이 번호를 토대로 당첨 내역을 확인합니다.
여기서 판매점의 단말기를 이 앱이 담당합니다.

두번째는 `로또 결과 분석기`입니다. 사용자는 토요일 저녁 당첨된 로또 번호를 확인하고 
자신이 얼마를 벌었는지 확인합니다. 그리고 투자 대비 수익률은 몇퍼센트인지 확인합니다. 
이를 이 앱이 대신하며 사용자의 로또 관련 재무 관리자의 역할을 하는 것입니다!

요약하자면 사용자로부터 로또 구입 금액과 당첨 번호를 입력받아 
생성된 로또 N매와 당첨 통계를 확인할 수 있는 애플리케이션입니다.

### 기능 요구 사항

-[x] 로또 번호의 숫자 범위는 1~45까지이다.
-[x] 1개의 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
-[x] 당첨 번호 추첨 시 중복되지 않는 숫자 6개와 보너스 번호 1개를 뽑는다.
-[x] 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.
  > 1등: 6개 번호 일치 / 2,000,000,000원 <br>
  > 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원<br>
  > 3등: 5개 번호 일치 / 1,500,000원<br>
  > 4등: 4개 번호 일치 / 50,000원<br>
  > 5등: 3개 번호 일치 / 5,000원
-[x] 로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또를 발행해야 한다.
-[ ] 로또 1장의 가격은 1,000원이다.
-[x] 당첨 번호와 보너스 번호를 입력받는다.
-[ ] 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력하고 로또 게임을 종료한다.
-[ ] 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException을 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
-[ ] Exception이 아닌 IllegalArgumentException, IllegalStateException 등과 같은 명확한 유형을 처리한다.

# 주요 기능

## 로또 판매기

- [x] 로또 번호의 숫자 범위는 1~45까지이다.
- [x] 중복되지 않는 6개의 숫자를 가진다.
- [x] 로또 번호는 오름차순으로 보관한다.
- [x] 가지고 있는 숫자들을 보여준다.
- [x] 1장의 가격은 1000원이다.

## 로또 결과 분석기

- [x] 보너스 번호를 안다.
- [x] 수익률을 확인한다.
- [x] 당첨 통계를 제공한다.
- [x] 당첨금이 얼마인지 알려준다.

## 입력

- [x] 사용자로부터 로또 구입 금액을 입력 받는다.
- [x] 6개의 당첨 번호를 입력 받는다.
  - [x] 번호는 쉼표(,)를 기준으로 구분한다.
- [x] 보너스 번호를 입력 받는다.
- [ ] 예외 상황 시 해당 부분을 다시 입력받는다.

## 출력

- [x] 발행한 로또 수량 및 번호를 출력한다.
- [x] 당첨 내역을 출력한다.
- [ ] 예외 상황 시 에러 문구를 출력한다.
  - [ ] 에러 문구는 `[ERROR]`로 시작한다.

## 추가 고려 사항

- [ ] 사용이 끝난 자원은 닫는다.
- [x] 당첨금이 매우 큰 경우에도 계산할 수 있다.

## 예외 사항

- [x] 수량이 음수이거나 너무 클 때 
- [ ] 수량이 숫자가 아닐 때 
- [x] 구입 금액이 1,000원으로 나누어 떨어지지 않을 때
- [x] 구매 금액이 숫자이거나 정수가 아닐 때
- [x] 구입 금액이 0원일 때
- [x] 구매하려는 로또가 너무 많을 때
- [x] 당첨 번호가 쉼표(,)로 구분되어 있지 않을 때

# TDD

- 테스트의 메서드 이름은 [Unit Test Naming Conventions](https://dzone.com/articles/7-popular-unit-test-naming)
  를 참고하여 <i>Should_ExpectedBehavior_When_StateUnderTest</i> 방법으로 한다.
- 이번 미션에서 TDD를 구현하는 방법은 다음과 같다.

```markdown
1. 구현하고자 하는 기능을 정한다.
2. 실패하는 테스트를 작성한다.
3. 객체의 메서드를 적절히 구현한다.
4. 테스트를 실행하여 결과를 확인한다.
5. 구현 도중 더욱 구체적인 요구사항이나 예외사항은 README에 적고 구현완료한 기능과 함께 커밋한다.
```
# 실행 결과 예시
```angular2html
구입금액을 입력해 주세요.
8000

8개를 구매했습니다.
[8, 21, 23, 41, 42, 43] 
[3, 5, 11, 16, 32, 38] 
[7, 11, 16, 35, 36, 44] 
[1, 8, 11, 31, 41, 42] 
[13, 14, 16, 38, 42, 45] 
[7, 11, 30, 40, 42, 43] 
[2, 13, 22, 32, 38, 45] 
[1, 3, 5, 14, 22, 45]

당첨 번호를 입력해 주세요.
1,2,3,4,5,6

보너스 번호를 입력해 주세요.
7

당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.
```